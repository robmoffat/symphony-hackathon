<html>
    <head>
        <title>Symphony Tabs</title>
        <link rel="stylesheet" type="text/css" href="bootstrap-4.3.1-dist/css/bootstrap.min.css" />
        <link href="/table/tabulator.min.css" rel="stylesheet" />     
        <script type="text/javascript" src="/symphony/symphony-api.js" charset="utf-8"></script>
        <script type="text/javascript" src="/table/tabulator.min.js"></script>      
    </head>
    <body class="bg-light">
        <h1>My App page</h1>
         
        <div class="container-fluid" style="padding-top: 15px;">
            <div class="row">
            
                <div class="col col-12">
                    <div class="input-group input-group mb-3">
                        <div class="input-group-prepend">
                            <a class="input-group-text" id="help" href="asd.html">Help</a>
                        </div>
                        <input class="form-control">Something</input>
                        <div class="input-group-append">
                            <a class="input-group-text" id="about" href="sdf.html">Blah
                            </a>
                        </div>
                    </div>  
                </div>
            
            </div>
        </div>
        
        <p>Do some stuff here, maybe with bootstrap and table</p>

        <script type="text/javascript" th:inline="javascript">
            const id = 'symphony-tabs';
            const inServices = ['modules', 'applications-nav', 'ui', 'share', 'extended-user-info'];
            const viewName = id+ ":view";

            SYMPHONY.remote.hello()
            .then(function(data) {
                return SYMPHONY.application.connect(id, inServices, [viewName]);
            })
            .then(function(response) {
                const eui = SYMPHONY.services.subscribe("extended-user-info");
                return eui.getJwt();
            })
            .then(function(token) {
                console.log("TOKEN"+token);
                return fetch('/userDetails', {
                    headers: {
                        'Authorization' : 'Bearer '+token,
                        'Content-Type' : 'application/json'
                    }
                });
            })
            .then(response => response.json())
            .then(function(response) {
                console.log("some response"+response)
            })
            .catch(function(error) {
                console.error(error);
                console.error("broken");
            })
        </script>
    </body>
</html>